Huom! Kaikki testit on toteuttu seuraavanlaisella koneella: Windows 10 OS:llä, Google Chrome selaimella ja koneena on toiminut Legion 5 kannettava. 16Gt RAM, AMD Ryzen 7 5800H, NVIDIA Geforce 3070 ja 200GB vapaata levytilaa SSD-levyasemalla.

# H1 - Kaikki alkaa laboratoriosta

## Katseltavaa ja kuunneltavaa
### Herrasmieshakkerit - Rikos jonka voit tilata netistä - Kausi 06, jakso 29
Linkki: https://www.withsecure.com/fi/whats-new/podcasts/herrasmieshakkerit

Jakso käsittelee CAAS (Cybercrime-As-A-Service) palveluita, niiden kehitystä ja historiaa sekä niiltä suojautumisen perustoimia.
CAAS-palveluihin sisältyvä RAAS (Ransomware-As-A-Service) oli sekin erittäin tärkeässä keskiössä jaksaon aikana.

Kyberrikollisuus on kasvanut huomattavasti sen lähtökohdista, jolloin rikolliset kohdistivat toimiaan yksittäisiin henkilöihin, nykyään toimiat kohdistavat toimensa yksittäisistä käyttäjistä yrityksiin ja niissä työskentelevien ihmisien dataan ja käyttöoikeuksiin.

Kyberrikollisuudessa on myös jakson mukaan havaittavissa selkeää toiminta maan ulkopuolelle keskittyvään toimintaan, sillä useiden maiden virkavallat eivät ole kiinnostuneita tai ovat resurssillisesti rajoittuneita seuraamaan ja selvittämään muissa maissa tapahtuvaa ja niihin kohdistuvaa kyberrikollisuutta, joka on lähtöisin rikollisten kotimaasta.

Tämä on toiminut osasyynä rikollisten määrälliseen nousuun, sillä kyberrikoksista ei vielä saa kaikkialla yhtä kovia rangaistuksia, kuin rikoksista "oikeassa" maailmassa. Myös sosiaalinen media on toiminut kyberrikollisuuden haluttavuuden kasvussa, antaen nuorille kuvaa rikoksen tuottavuudesta ja siitä riippumattomasta suhteellisesta elämän normaaliudesta, rikkaan ihmisen raameissa.

Netin tarjoama anonymiteetti on antanut myös mahdollisuuden ammattimaistaa rekrytointia ja saada suojaa tarjoamalla isäntä maalle kyseisiä rikollisiapalveluita anonyymisti, haluttuihin kilpaileviin tai vihollisiksi luokiteltuihin maihin.

Kyberrikollisien ammattimaisuudesta kertoo jakson mukaan hyvin se että tutkituissa isommissa ryhmissä on normaaleille yrityksille ominaisia piirteitä ja käytänteitä: työaikoja, työpanoksia, lomia sekä poissaoloja seurataan aktiivisesti. Ryhmillä saattaa myös olla erillinen HR-osasto sekä osastojen välistä työnjakoa ja erillinen uhrien kontaktoimiseen ja lunnaiden saamisen ohjeistamiseen erikoistunut asiakaspalvelu.

Kasvanut määrä tekijöitä on johtanut alempaan ja alempaan uhriksi joutumisen kynnykseen, uhreina eivät ole enää vain isoimmat ja varakkaimmat yrityksen, vaan kaikenkokoiset yritykset kelpaavat uhreiksi. Tilaisuus tekee varkaan.

Jakson mukaan alenneet kriteerit uhreissa tarkoittaa yrityksille kasvavaa tarvetta ottaa tietoturvallisuus- sekä sen tiimoilla tapahuva koulutus entistä vakavammin, jotta mahdolliset yrityksen omvasta toiminnasta johtuvat rikoksen uhriksi joutumiset saataisiin minimoitua. Tämä osaksi ZeroDay-väärinkäytöksien takia. ZeroDay-väärinkäytöksissä (Ohjelmassa oleva suunnittelu virhe tai aukko, jota ei ole huomattu tai jota voi olla vaikea jälkeenpäin saada päivitettyä pois) ei ole väliä yrityksen koolla, yritys voi olla pieni, mutta koska se on osa virhepintaa, joutuu se muiden mukana uhriksi.

Yrityksien on jakson mukaan hyvä hajauttaa palveluita pilvien avulla, tehdä käytänteitä pääsyoikeuksiin sekä laitteiden käytettävyyteen, työolojen parantamiseen ja työntekijöiden kouluttamiseen, jotta yrityksen laitteistollinen- ohjelmistollinen sekä käyttäjälliset rajapinnat olisivat mahdollisimman vahvat ja osaavat.

### Hutchins et al 2011: Intelligence-Driven Computer Network Defense Informed by Analysis of Adversary Campaigns and Intrusion Kill Chains - 
Linkki: https://lockheedmartin.com/content/dam/lockheed-martin/rms/documents/cyber/LM-White-Paper-Intel-Driven-Defense.pdf

#### Abstraktisti, mutta rakennetusti

Tietoverkkouhkien ja tekijöiden kehittyminen ja mukautuminen on vaikuttanut negatiivisesti ennen riittävän toimiviksi katsottujen tietoturvametodien käytössä, kuten IDS (Intrusion Detection Systens), antivirus-ohjelmat sekä näiden ympärille rakennetut ratkaisut. Kyseisitä kehittyneemmistä riskitekijöistä käytetään nimitystä APT (Advanced-Persistent-Threat). 

Kehittyneemmät uhat ovat luoneet painetta tietoturvan puolelle uudistaa toimintatapoja ottaa osaksi puolustuksellista kantaa tietopohjainen lähestymistapa ja sen metodit, jossa uhkatekijöitä ei pyritä estämään pelkästään haavoittuvuuksien huomioimisella, vaan myös riskien arvoittamiseen pohjautuvalla uhka-arvioinnilla.

Puolustuksellinen kehitys on tarkoittanut tunkeutumisien käyttämistä tietopohjan kartoittamiseen ja järjestelmän tuntemista uhkien sekä hyökkääjien metodien käytön rajoittamiseen ja ohjaamiseen. Tällä on pyritty muodostamaan ympäristö, joka mahdollistaa väärinkäytöksistä oppimisen, tunnistamisen ja siten myös estämisen, unohtamatta tunnistettujen heikkouksien paikkaamista.

#### Fyysisen tunkeutujan tappoketjusta bittitaistelijoiden eliminointiin

Tappoketju koostuu alla olevista vaiheista, jotka muodostavat järjestyksessä etenevän listan toimia, jossa jokaisen kohdan riittävyyttä sekä kattavuutta tulee tarkastella ja tarkistaa sen edetessä. Vaillinaisuudet johtavat todennäköisesti koko ketjun epäonnistumiseen ja mahdollisien väärinkäyttäjien ennen aikaiseen poistumiseen järjestelmästä ja mahdollisen tunkeutumisen kannalta kriittisen tiedon selvittämättä jäämiseen.

Alkuperäinen selitys nojaa taistelustrategiaan, josta se on sittemmin otettu taktiseen käyttöön tietoturvan puolelle.

1. Find: Etsi sopiva vastustaja hyökättäväksi.
2. Fix: Täsmennä kohteen sijainti ja aloita taustalla toimet kohteen tarkan voimamäärän tietoon saamiselle.
3. Track: Jäljitä ja seuraa tunkeutujien toimintaa ja toimintatapoja.
4. Target: Kohdista uhkatekijöitä ja ympäristöä jossa he toimivat sopivilla materiaaleilla.
5. Engage: Aktivoi aiemmin mitoitetut ja tarpeelliseksi katsotut materiaaliset vastatoimet. 
6. Assess: Katselmoi olivatko toimet riittävät vai vaatiiko kyseisen tunkeutujan estäminen ja uhkan poistaminen enemmän tietoa toiminnasta tai laajempaa materiaalista käyttöä.

Kyseisen taistelustrategian päälle on rakennettu tietoturvalle tunkeutumisen estämisen, tunnistamisen ja toiminnallisuuksien tappoketju. Kyseisen ketjun toiminta perustuu tunkeutujan nopeaan havannointiin ja näiden toimintatapojen analysointiin ja sen kautta estämiseen (järjestelmässä tapahtuva sivuttaisliike ohjelmien välillä vai suora yritys päästä eteenpäin käyttäen ohjelmistoja tai saatuja tunnuksia päämäärän saavuttamiseen).

Kybertappoketjun vaiheet mukailevat sen reaalimaailman verrokkia.

1. Reconnaince: Tiedustelu ja tiedonkeruu, jossa uhkatekijät aloittavat mahdollisen uhrin tietojen ja hyökkäyksen realistisesti toteutettavuuden analysointia. Saattaa jäädä tähän vaiheeseen, jos hyötysuhde vaivaan ei toteudu.
2. Weaponization: Tunkeutujat pyrkivät käyttämään usein automatisoituja keinoja päästä kohteen suojan sisälle, jalan sijan saamiseksi. Tekstin mukaan PDF- sekä Microsoft-ympäristön tuottamat tiedostot ovat tartuntavektorillisen käytön määrällisessä nousussa.
3. Delivery: Valitun "paketin" toimitus kohteeseen tai ainakin sen yritys. Tekstin mukaan liitteet, verkkosivut sekä fyysiset laitteet (esim. USB-tikku) olisivat suosituimpia alustoja.
4. Exploitation: Onnistunut toimitus ja aktivaatio käynnistää koodin, joka voi käyttää hyödykseen ohjelmistollista heikkoutta, käyttöjärjestelmällistä heikkoutta tai itse-toteutuvaa koodia. 
5. Installation: Onnistuneen takaportin asentuminen antaa tunkeutujalle aktiivisen mahdollisuuden päästä käsiksi joko myrkytettyyn koneeseen tai kohteen järjestelmään, paremman jalansijan saavuttamiseksi.
6. Command and Control: Tässä vaiheessä tunkeutujat, joiden ohjelmisto ei toteuta haluttuja toimia automaattisesti pyrkii muodostamaan yhteyden tunkeutujien suuntaan, jotta nämä voisivat suorittaa halutut toimet kohteessa manuaalisen yhteyden kautta.
7. Actions on Objectives: Vasta kun aiemmat vaiheet, sekä aktiivinen pääsy kohteeseen ovat varmistuneet voi tunkeutuja aloittaa alkuperäisen suunnitelman mukaiset toimet olivat nämä sitten suoria (tietojen vientiä, kryptausta tai ohjelmiston saastuttamista) tai vain vaiheittaisia (astinkivenä toimiva käyttäjä saatu haltuun, jonka järjestelmästä voidaan jatkaa syvemmälle kohti seuraavaa kohdetta).



### Santos et al: The Art of Hacking - 
Linkki: https://learning.oreilly.com/videos/the-art-of/9780135767849/9780135767849-SPTT_04_00/

![Ei pääsyoikeutta materiaaliin](https://github.com/user-attachments/assets/f678c9a4-738b-4d4f-a76d-0d0b90519051)

Sivu valitti minulle riittävien oikeuksien puuttumisesta tai pikemminkin niiden jo loppuun käyttämisestä.


### Vahinkoja voi sattua, mutta nekin voivat johtaa maksuvelvollisuuteen
Linkki: https://finlex.fi/fi/oikeus/kko/kko/2003/20030036

Tapauksessa käsitelty porttiskannaus tapaus alkoi vuonna 1998 ja sai lopullisen päätöksensä vuonna 2003 korkeimman oikeuden päätökseen.

Porttiskannauksen teko itsessään oli riittävä syy syytteeseen, sillä sen tekeminen, oli se toteutettu sitten vilpillisen- tai vilpittömän tarkoitusperän takia aiheuttaa reaktion kohteessa, joka aktiivisesti seuraa verkkoliikennettään ja siihen kohdistuvia uhkia. Täten syyntakeellisuus ei asiakirjan mukaan ole kyseenalainen asia, vaan se on selkeä. Asia jota vahvistaa syytetyn IT-koulutus ja koneelta löytyneet raskauttavat ohjelmistot sekä niiden käyttämisen aktiivisuudesta osoittamat indikaattorit.

Henkilön tietoteknillinen tausta oli osana materiaalia ja sitä käytettiin antamaan vahvempaa pohjaa sille, että A:n olisi pitänyt tietää käyttämänsä ohjelmiston mahdolliset seuraamukset.

Kyseinen pöytäkirja antaa myös selvää kuvaa siitä, että korkeimpaan oikeuteen ei ole mitään asiaa mennä valittamaan, jos tapaus ei ole erittäin selkeästi omaan pesään päin, sillä muutoin mahdollisesti laskeneet rangaistukselliset korvausvelvoitteet voivat saada hetkessä hinnallista nousua.

Tapaus antaa myös kuvaa Suomen lakien näkemyksestä IT-toimiin ja yksilön vastuisiin verkkoympäristössäkin toimiessa.


## Laboratorion pohjan valmistamisen ensiaskeleet ja toimet![Uploading Ei pääsyoikeutta materiaaliin.png…]()


### A - Kali (Ma Shakti De)!

Latasin ohjeiden mukaisesti kalin tiedostot järjestelmän kotisivuilta ja asensin sen tämän jälkeen uutena virtuaalikoneena VirtualBoxiin.
Koska tässä vaiheessa ei ilmennyt ongelmia, en dokumentoinut sitä tekstiä lukuunottamatta.

### B - Yhteyden toimimattomuuden tarkistus
Otin Kalin yhteyden pois VirtualBoxin asetuksen kautta, tämä esti onnistuneesti Kalin verkkoyhteyden toimivuuden.

![Kali ei verkossa, virtualboxin verkkoasetus otettu pois](https://github.com/user-attachments/assets/599c8b99-0fee-4b65-ae62-1bbbc058df5b)

Varmistin selain-testin jälkeen että toimivuus ei ollut aktiivisena ohjeen mukaisella komennolla "ping 8.8.8.8".

![ping epäonnistui, kaikki kunnossa](https://github.com/user-attachments/assets/f996b5f8-0df8-4eca-9daa-4f9cb2e3563e)

Kaikki meni kuten ohjeessa oli toivottu. Siittyin tämän jälkeen seuraavaan vaiheeseen.


### C - Yhteyksien tilan tarkempi kartoitus nmapilla

![nmap toteutettu, 1000 porttia kiinni](https://github.com/user-attachments/assets/850e20ef-fa2f-4e13-9a5f-1943693b76c8)

Koska virtuaalikoneella ei ole yhteyttä, ei se ole päässyt muodostamaan DNS-tiedustelu.

"Host is up" ilmoituksen ymmärsin tulleen, koska virtuaalikone itsessään oli ylhäällä, tarkoittaen että "kotikone" analysoi itsensä olemassa olevaksi kohteeksi. Muutoin mitään portteja ei ollut aktiivisena, sisään tai ulos.

### D - 
### E - Metasploitable 2 asentaminen

Latasin ohjelmiston osoitteesta https://sourceforge.net/projects/metasploitable/ ja asensin sen tämän jälkeen osaksi VirtualBox-ympäristöäni.

![metasploitable virtboksissa](https://github.com/user-attachments/assets/98bcab77-4e33-4ae4-bae7-4f04c98544f3)

Metasploitable 2 aukesi onnistuneeksi instanssiksi VirtualBoxiin. Aloitin tämän jälkeen testaukset sen ja Kalin välisen yhteyden muodostamiseksi.

### F - Lähiverkkoyhteys, manuaalisesti

Koska tämä ei ollut itselleni entuudestaan tuttu toiminto, aloitin googlettamalle "metasplainable and kali" ensimmäinen vastaantullut linkki oli: https://www.geeksforgeeks.org/how-to-link-kali-linux-with-metasploitable-2/

Luin artikkelin läpi ja lähdin sen jälkeen testaamaan, olisiko kyseinen ohjeistus sovellettavissa sellaisenaan omaan tilanteeseeni. Kävi kuitenkin nopeasti ilmi, että ohjeen kohdassa 3 oleva verkkoasetuksellinen valikko ei ollut omassa VirtualBox-versiossani näkyvillä. Tarkistin tämän jälkeen oliko minulla versio tuorein mahdollinen, koska näin ei ollut päivitin sen siinä toivossa, että uudemman version "Preferences" voisi olla palautunut vuoden 2022 vastaavaan...

Näin ei kuitenkaan ollut.

![Ero näkymässä](https://github.com/user-attachments/assets/7da00353-6565-41b6-8c13-a92e642fdb4b) ![geeksforgeeks näkymä](https://github.com/user-attachments/assets/cc13bd58-0f81-40ac-8a9d-122886c55402)

Vertailun vuoksi sivulla ollut versio "Preferences" näkymästä.

![geeksforgeeks näkymä](https://github.com/user-attachments/assets/cc13bd58-0f81-40ac-8a9d-122886c55402)



### G - 
### H - 
